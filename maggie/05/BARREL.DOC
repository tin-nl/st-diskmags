

                     WELCOME TO ALL STOSSERS

                        THE BARREL SCROLL
                             
                         BY STEVE JARRETT

                         CODED FOR MAGGIE
                            MARCH 1991



    THIS ISSUE I AM GOING TO DO A BARREL SCROLLER I WILL SHOW YOU     
    HOW TO DO THIS USING DEF SCROLL OR SCREEN COPY WHY BOTH?
    WELL ITS OK USING THE DEF SCROLL INSTRUCTION BUT IT IS NOT
    VERY FLEXIBLE I.E. IT TENDS TO SLOW DOWN A LOT WHEN YOU TRY TO
    MOVE  SOME SCREEN HORIZONTALY ALSO IF YOU USE A  SAMPLE  THIS 
    SLOWS IT AS WELL,  BY USING SCREEN COPY YOU CAN SET UP A SPARE 
    LOGICAL SCREEN AND USE THE SCREEN$ COMMAND TO MOVE THE BARREL  
    AROUND THE SCREEN E.T.C.

    O.K. LETS TAKE A LOOK AT WHAT WE NEED TO DO TO CREATE THE 
    DESIRED EFFECT .TO GET WHAT WE ARE AFTER WE NEED TO HAVE THE
    IMAGE IN THE CENTRE OF THE BARREL NORMAL OR IN FOCUS LETS SAY
    AS THE IMAGE NEARS THE EDGES IT MUST BE SQUASHED VERTICALLY
    THAT IS BASICALLY IT . TAKE A LOOK AT THE BELOW DIAGRAM

    \\\\\\\\\\\\\\   ZONE 1  ( THIS ZONE MOVES UP 1 PIXEL )
    
    \\\\\\\\\\\\\\   ZONE 2  ( THIS ZONE MOVES UP 2 PIXELS)
    \\\\\\\\\\\\\\

    \\\\\\\\\\\\\\   ZONE 3  ( THIS ZONE MOVES UP 3 PIXELS)
    \\\\\\\\\\\\\\
    \\\\\\\\\\\\\\

    \\\\\\\\\\\\\\   ZONE 4  ( THIS ZONE MOVES UP 4 PIXELS)
    \\\\\\\\\\\\\\
    \\\\\\\\\\\\\\
    \\\\\\\\\\\\\\

    \\\\\\\\\\\\\\   ZONE 5  ( THIS ZONE MOVES UP 3 PIXELS)
    \\\\\\\\\\\\\\
    \\\\\\\\\\\\\\

    \\\\\\\\\\\\\\   ZONE 6  ( THIS ZONE MOVES UP 2 PIXELS)
    \\\\\\\\\\\\\\

    \\\\\\\\\\\\\\   ZONE 7  ( THIS ZONE MOVES UP 1 PIXEL)
 


     OK FROM THE ABOVE YOU CAN SEE HOW THE SCREEN IS BROKEN DOWN
     INTO 7 SEPERATE ZONES WHICH ALL MOVE AT DIFFERENT SPEEDS.
     NOW WE CAN SEE HOW TO DO IT LETS LOOK AT SOME OF THE BASIC
     CODE.... FIRST THE DEF SCROLL ROUTINE.........

     FIRST WE DEFINE THE 7 ZONES
     
     470 DEF SCROLL 1,0,0 TO 320,7,0,-1
     480 DEF SCROLL 2,0,6 TO 320,17,0,-2
     490 DEF SCROLL 3,0,15 TO 320,32,0,-3
     500 DEF SCROLL 4,0,29 TO 320,52,0,-4
     510 DEF SCROLL 5,0,48 TO 320,70,0,-3
     520 DEF SCROLL 6,0,67 TO 320,77,0,-2:Y=0
     530 DEF SCROLL 7,0,75 TO 320,83,0,-1:X=182

     
     THE IMAGE IS TO BE SCROLLED UP THE SCREEN FROM SCANLINE 83
     IF YOU LOOK AT LINE 530 WE SEE THE WIDTH OF THE ZONE IS OVER
     LAPPING THE NEXT ZONE BY TWO LINES THIS IS THE SIZE OF THE
     STEP IN THE NEXT ZONE (6), AND THE SAME HAPPENS IN ZONE 6
     BUT THIS TIME BY 3 LINES THIS HAPPENS THRU ALL THE ZONES
     IF YOU DONT OVER LAP THE ZONES THE IMAGE WILL STOP WHEN IT
     REACHES THE END OF THE ZONE, ALSO IF THE OVERLAP IS LESS THAN 
     THE  STEP UP OF THE NEXT ZONE YOU WILL NOT  PICK  UP  ENOUGH 
     LINES AND YOU WILL HAVE GAPS IN THE IMAGE (PLAY AROUND  WITH 
     AND SEE WHAT OCCURS)


     ON LINE 520 WE ALSO SET Y=0 THIS RESETS THE VARIABLE Y WHICH
     CONTROLS THE PLACEMENT OF THE NEW IMAGE.LINE 530 SETS X=183
     THIS ALSO SET A VARIABLE FOR PLACING A NEW IMAGE MORE ON THIS
     LATER...   NEXT ITS STRAIGHT INTO THE MAIN LOOP ..........

     550 REPEAT
     560 Y=Y+3:X=X+3:IF X>199 THEN X=0
     570 IF Y>199 THEN Y=0
     580 REM
     590 SCROLL1:SCROLL12:SCROLL3:WAIT VBL:SCROLL4:SCROLL5:SCROLL6
         SCROLL7
     600 REM
     610 SCREEN COPY 10,0,Y,320,Y+3 TO LOGIC,0,79
     620 REM
     630 SCREEN COPY 10,0,X,320,X+3 TO LOGIC,0,70
     640 UNTIL INKEY$>""


     AS YOU CAN SEE WE HAVE 2 VARS X AND Y TO START WITH Y=0 AND
     X=182 THIS IS BECAUSE I DECIDED TO PUT TWO IMAGES ON THE 
     SCREEN AT ONCE . I DID THIS BECAUSE WHEN THE IMAGE IS PLACED
     AT THE BOTTOM OF THE BARREL IT GETS SQUASHED UP AND AS IT
     MOVES UP THE SCROLL IT GETS STRETCHED OUT AGAIN BUT IT LOSSES
     SOME OF ITS RESOLUTION SO I PLACE A NEW IMAGE ON SCREEN AT
     ZONE 5 THIS IS WHY X IS OFFSET TO Y .PLAY AROUND WITH  X TO      
     SEE WHAT I MEAN 

     IN THE MAIN LOOP WE INC X AND Y BY 3 AND RESET THEM WHEN THEY
     REACH OVER 199.
     
     ON  LINE 590 WE SCROLL THE ZONES ,PLEASE NOTE  WERE  I  HAVE 
     PLACED THE WAIT VBL,  I TRIED IT IN MANY PLACES  I.E. JUST 
     BEFORE THE UNTIL AT LINE 640 BUT WHEN COMPILED A NASTY GLITCH
     OCCURED IN THE MIDDLE OF THE BARREL THE SAME HAPPENED IN THE
     SCREEN COPY ROUTINE???

     LINES 610 AND 630 PLACE THE NEW IMAGE ON THE SCREEN. ONE AT
     79 AND ONE AT 70 I EXPLAINED THIS ABOVE....

     THE SCREEN COPY ROUTINE IS PRETTY MUCH THE SAME ...
     
     170 SCREEN COPY LOGIC,0,0,320,6 TO LOGIC,0,-1
     180 SCREEN COPY LOGIC,0,7,320,16 TO LOGIC,0,5
     E.T.C....
     
     THIS IS JUST THE SAME AS THE DEF SCROLL STATEMENTS THE FIRST
     PART  OF THE STATEMENT (screen copy  logic,0,0,320,6)IS  THE 
     SIZE OF THE ZONE TO BE SCROLLED AND IT IS COPIED TO LOGIC        
     ,0,-1 . IT MOVES UP THE SCREEN 1 LINE AT A TIME.THE OVER LAP
     IS ACHIEVED IN THE SECOND PART ( see line 180 i.e   to logic,0,5)
     THATS ABOUT ALL THATS DIFFERENT BETWEEN THE TWO INSTURTIONS.

     THE REST OF THE ROUTINE IS MOSTLY IDENTICAL TO THE FIRST!!

     WHEN UNCOMPILED THE DEF SCROLL RUNS AROUND TWICE AS FAST AS
     THE SCREEN COPY , BUT WHEN COMPILED THE SCREEN COPY CATCHES
     UP AND THEY RUN ABOUT THE SAME.THE SCREEN COPY ROUTINE IS
     THE BETTER OF THE TWO FOR ME AS ITS MORE FLEXIBLE AS IT CAN
     BE USED ON ANY SCREEN ANYWHERE IN MEMORY AS SUCH CAN BE
     MOVED AROUND BETTER .....

     BEFORE I GO I WOULD LIKE TO EXPLAIN HOW THIS LITTLE PRG 
     CAME TO BE , I WAS THINKING OF WHAT TO DO NEXT FOR MAGGIE AND
     I HAD THE IDEA TO DO A BARREL SCROLL. I HAD NOT PREVIOUSLY
     DONE ONE AND A RUNNING SCREEN WAS CREATED IN AROUND AN HOUR
     BUT AS ALWAYS WITH ME I WAS NOT TOTALLY HAPPY WITH IT SO I 
     TWEAKED IT A LITTLE THEN I THOUGHT ABOUT A DIFFERENT WAY OF
     DOING THE SAME THING AND I WORKED OUT THE SCREEN COPY ROUTE
     I THEN PUT THE TWO TOGETHER ADDED SOME TEXT ,AN INTRO TEXT
     SCREEN ,MUSIC WAS ADDED AND THATS ABOUT IT ALL IN ALL IT HAS
     TAKEN ABOUT 3 DAYS MOST OF THAT TIME WAS SPENT HERE ON THE
     WORD PROCESSOR.


     YOU MAY ALL BE WONDERING WHO I AM ??? MOST OF YOU WILL HAVE
     NEVER HEARD OF ME SO HERE IS A SHORT INFO STATEMENT.......

     I AM STEVE JARRETT ,IM AN OLD GIT OF 30 YEARS OF AGE I HAVE
     BEEN MESSING AROUND WITH CODE FOR AROUND 2 OR 3 YEARS AND
     CODE WHENEVER THE WIFE LETS ME! OR WHEN EVER MY SON STOPS
     PLAYING GAMES AND LEAVES ME ALONE FOR A FEW HOURS
     
     AT THE MOMENT I AM WORKING ON A MULTI SCREEN DEMO WRITTEN
     ENTIRELY BY ME AND WILL FEATURE TRACKER MUZAK ABOUT SEVEN
     GOOD SCREENS A VERY NICE AND ORIGINAL MENU SCREEN,AND SOME
     SCREENS WILL HAVE EFFECTS THAT I HAVE NOT SEEN IN ANY STOS
     DEMOS TO DATE .. ALL IN THIS DEMO WILL BE BY ME EXCEPT SOME
     OF  THE MUSICS .  SO I RECKON THAT IT WILL  BE  THE  BIGGEST 
     SINGLE PERSON STOS DEMO TODATE??????? I HAVE FINISHED MOST OF 
     THE SCREENS SO RELEASE WILL BE SHORTLY I HOPE .IT ALL DEPENDS 
     ON THE AMOUNT OF TIME I CAN GET TO DO SOME CODING??


     OK THATS ENOUGH OF THIS CRAP 


               TO CONTACT ME WRITE TO 
                          STEVE JARRETT
                          52 MAWNEY CLOSE
                          ROMFORD
                          ESSEX
                          RM7 8EJ
        



                   SEE ALL YOU STOSSERS LATER BYE!!!!

